# K线图系统 - 快速使用指南

## 🚀 立即开始

### 方法1: 使用启动脚本（推荐）

```bash
cd /Users/lixinfei/workspace/Quant
./start_system.sh
```

然后在浏览器中打开: **http://localhost:5173**

### 方法2: 手动启动

```bash
# 1. 启动SSH隧道
ssh -N -L 18123:localhost:8123 wsl &

# 2. 启动后端
cd kline-backend
source venv/bin/activate
uvicorn app.main:app --host 0.0.0.0 --port 8000 &
cd ..

# 3. 启动前端
cd kline-frontend
npm run dev
```

## 📊 使用系统

### 步骤1: 搜索股票
1. 在"股票选择器"中输入关键词
   - 示例: "600000" 或 "浦发"
2. 从下拉列表中选择股票

### 步骤2: 选择时间范围
- 默认: 最近3个月
- 可自定义: 点击日期选择器

### 步骤3: 查询K线
- 点击"查询"按钮
- 等待数据加载（通常1-2秒）

### 步骤4: 查看和交互
- **拖动底部滑块**: 调整显示的时间范围
- **鼠标滚轮**: 放大/缩小K线
- **鼠标悬停**: 查看每根K线的详细数据
  - 日期
  - 开盘价/收盘价/最高价/最低价
  - 成交量

## 🔍 示例查询

### 示例1: 查看浦发银行2010年全年K线
1. 股票: 输入 "600000" → 选择 "600000.SH 浦发银行"
2. 日期: 2010-01-01 至 2010-12-31
3. 点击"查询"
4. 预期: 显示约242个交易日的K线

### 示例2: 查看平安银行最近3个月
1. 股票: 输入 "平安" → 选择 "000001.SZ 平安银行"
2. 日期: 使用默认（最近3个月）
3. 点击"查询"

### 示例3: 对比不同时期
1. 先查询2010年数据
2. 修改日期为2020年
3. 再次查询，观察价格变化

## 🎨 界面说明

```
┌─────────────────────────────────────┐
│     股票K线图系统                    │
├─────────────────────────────────────┤
│ [股票选择器▼] [日期范围] [查询按钮]  │
├─────────────────────────────────────┤
│                                     │
│         K线图显示区域               │
│     (蜡烛图 + 成交量柱状图)          │
│                                     │
│ ═══════════════════════════════     │ ← 时间拖动滑块
├─────────────────────────────────────┤
│ 鼠标悬停提示框:                     │
│   日期: 2010-01-04                  │
│   开: 61.61                         │
│   收: 59.80                         │
│   高: 61.72                         │
│   低: 59.74                         │
│   量: 66万                          │
└─────────────────────────────────────┘
```

## 🛠️ 常见问题

### Q1: 搜索不到股票？
- 确保输入正确的代码或名称
- 支持模糊搜索，如输入"平安"会找到所有包含该词的股票

### Q2: K线图显示空白？
- 检查日期范围是否有数据（避免选择未来日期）
- 检查股票是否在该时期已上市
- 打开浏览器控制台查看错误信息

### Q3: 数据加载很慢？
- 首次查询会访问数据库（1-2秒）
- 二次查询同样参数会从缓存读取（<100ms）
- 历史数据缓存时间更长

### Q4: 如何停止系统？
```bash
cd /Users/lixinfei/workspace/Quant
./stop_system.sh
```

## 📡 API直接调用

如果需要直接调用API（用于开发或测试）:

### 获取股票列表
```bash
curl "http://localhost:8000/api/stocks/list?keyword=平安&limit=10"
```

### 获取K线数据
```bash
curl "http://localhost:8000/api/kline/data?code=000001.SZ&start_date=2010-01-01&end_date=2010-12-31&adj_type=after"
```

### 查看API文档
浏览器访问: http://localhost:8000/docs

## 💡 高级技巧

### 技巧1: 快速切换股票
- 在股票选择器中直接输入新代码
- 无需清空原有内容

### 技巧2: 精确时间范围
- 使用拖动滑块可以精确到具体的交易日
- 适合观察特定时期的行情

### 技巧3: 观察成交量异常
- 成交量柱状图高度异常时，可能是重要信号
- 红色=上涨日，绿色=下跌日

### 技巧4: 多屏对比
- 可以同时打开多个浏览器标签页
- 分别查看不同股票或时期

## 📞 获取帮助

- 查看完整README: `/Users/lixinfei/workspace/Quant/README.md`
- 后端日志: `kline-backend/server.log`
- 前端日志: `kline-frontend/frontend.log`
- 检查系统状态: `curl http://localhost:8000/health`

## 🎯 下一步

系统当前为MVP版本，计划后续增加:
- 周K/月K/年K线切换
- 技术指标（均线、MACD、KDJ等）
- 分钟级K线
- 多股票对比
- 自选股管理

---

**祝您使用愉快！** 📈
